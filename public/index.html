<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Management Dashboard</title>
  <link rel="icon" type="image/svg+xml" href="images/logo.svg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="https://unpkg.com/vanilla-calendar-pro@3.1.0/styles/layout.css">
  <link rel="stylesheet" href="https://unpkg.com/vanilla-calendar-pro@3.1.0/styles/themes/light.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
  <script src="js/firebase-init.js"></script>
</head>
<body>

  <div class="app-shell" id="appShell">

    <div class="app-content">
      <div class="project-info">
        <!-- Left group -->
        <div class="topbar-left">
          <div class="topbar-logo">
            <div class="topbar-logo__icon">
              <img src="images/logo.svg" alt="Logo" width="32" height="32" style="display:block;">
            </div>
            <span class="topbar-logo__text">ThreeDots</span>
          </div>
          <span class="topbar-breadcrumb__sep">/</span>
          <div class="board-title-wrap">
            <div class="board-combo" id="boardCombo">
              <button class="board-combo__trigger" id="boardComboTrigger">
                <i class="fas fa-columns board-combo__icon"></i>
                <span id="boardComboLabel">Select board</span>
                <i class="fas fa-star board-combo__fav-star" id="boardFavStar"></i>
                <i class="fas fa-chevron-down board-combo__chevron"></i>
              </button>
              <div class="board-combo__menu" id="boardComboMenu">
                <div id="boardComboList"></div>
                <div class="board-combo__footer">
                  <input type="text" class="board-combo__new-input" id="boardComboNewInput" placeholder="New board…" autocomplete="off">
                  <button class="board-combo__new-add" id="boardComboNewAdd" title="Add board"><i class="fas fa-plus"></i></button>
                </div>
              </div>
            </div>
          </div>
          <div class="board-options-wrap">
            <button class="project-column-heading__options" id="boardOptionsBtn" title="Board options"><i class="fas fa-ellipsis-h"></i></button>
            <div class="board-dropdown" id="boardDropdown">
              <button id="boardOptFavourite"><i class="fas fa-star"></i> <span id="boardOptFavouriteLabel">Make favourite</span></button>
              <div class="board-dropdown__divider"></div>
              <button id="boardOptRename"><i class="fas fa-pen"></i> Rename board</button>
              <button id="boardOptDelete" class="danger"><i class="fas fa-trash-alt"></i> Delete board</button>
            </div>
          </div>
       
          <div class="tags-wrap" id="tagsWrap">
            <button class="tags-btn" id="tagsBtn" title="Tags"><i class="fas fa-tag"></i></button>
            <div class="tags-popup" id="tagsPopup">
              <div class="tags-popup__title">
                Tags
                <button type="button" class="tags-themes__icon-btn" id="tagsThemesToggle" title="Color Themes">
                  <i class="fas fa-palette"></i>
                </button>
              </div>
              <div class="tags-list" id="tagsPopupList"></div>
              <div class="tags-popup__footer">
                <div class="tags-popup__new-row">
                  <input type="text" class="tags-new-input" id="tagsNewInput" placeholder="New tag name…" autocomplete="off">
                  <button class="tags-new-add" id="tagsNewAdd" title="Add tag"><i class="fas fa-plus"></i></button>
                </div>
              </div>
              <div class="tags-themes" id="tagsThemesPanel">
                <div class="tags-themes__title">Color Themes</div>
                <div class="tags-themes__list" id="tagsThemesList"></div>
              </div>
            </div>
          </div>
          <div class="topbar-divider"></div>
          <button class="topbar-icon-btn" id="themeToggleBtn" title="Toggle dark mode"><i class="fas fa-moon"></i></button>
        </div>

        <!-- Right group -->
        <div class="topbar-right">
          <div class="topbar-search" id="topbarSearch">
            <button class="topbar-search__icon-btn" id="searchToggle" title="Search"><i class="fas fa-search"></i></button>
            <input type="text" id="boardSearch" placeholder="Search cards&hellip;" autocomplete="off">
            <button class="topbar-search__clear" id="searchClear" title="Clear"><i class="fas fa-times"></i></button>
          </div>

          <div class="topbar-divider"></div>

          <div class="project-participants" id="projectParticipants">
            <!-- avatars injected by renderParticipants() -->
            <button class="project-participants__add" id="addParticipantBtn" title="Add participant"></button>
            <div class="participant-popover" id="participantPopover">
              <input type="email" id="participantEmail" placeholder="User's email address" autocomplete="off">
              <div class="participant-popover__actions">
                <button id="participantAddConfirm">Add</button>
                <button id="participantAddCancel">Cancel</button>
              </div>
              <p class="participant-popover__msg" id="participantMsg"></p>
            </div>
          </div>
   <div class="topbar-divider"></div>
          <button class="topbar-icon-btn" id="archiveBtn" title="Archive"><i class="fas fa-archive"></i></button>
          <button class="topbar-icon-btn" id="activityToggle" title="Activity"><i class="fas fa-stream"></i></button>

          <div class="topbar-divider"></div>

          <!-- User dropdown -->
          <div class="topbar-user" id="topbarUser">
            <div class="topbar-user__trigger" id="topbarUserTrigger">
              <div class="topbar-avatar-wrap">
                <div class="nav-user__avatar" id="navAvatar"><i class="fas fa-user"></i></div>
                <span class="topbar-status-dot"></span>
              </div>
            </div>
            <div class="topbar-user__dropdown" id="topbarUserDropdown">
              <div class="topbar-user__header">
                <div class="topbar-user__hd-avatar">
                  <div class="nav-user__avatar nav-user__avatar--lg" id="navAvatarDrop"><i class="fas fa-user"></i></div>
                  <span class="topbar-status-dot"></span>
                </div>
                <div class="topbar-user__hd-info">
                  <div class="topbar-user__hd-name" id="navUserName">Guest</div>
                  <div class="topbar-user__hd-email" id="navUserEmail"></div>
                </div>
              </div>
              <div class="topbar-user__divider"></div>
              <button class="topbar-user__item" id="profileBtn"><i class="fas fa-user-circle"></i> My Profile</button>
              <button class="topbar-user__item" id="settingsBtn"><i class="fas fa-cog"></i> Settings</button>
              <div class="topbar-user__divider"></div>
              <button class="topbar-user__item danger" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
            </div>
          </div>
        </div>
      </div>

      <div class="app">
        <main class="project">
          <div class="project-tasks"></div>
        </main>
        <aside class="task-details collapsed" id="activityPanel">
          <div class="task-activity">
            <h2>Recent Activity</h2>
            <ul id="activityFeed"></ul>
          </div>
        </aside>
      </div>
    </div>

    <div class="save-toast" id="saveToast"></div>

    <button class="fab" id="fabBtn" title="Add card"><i class="fas fa-plus"></i></button>

    <div class="modal-overlay" id="modalOverlay">
      <div class="modal-wrapper">
        <div class="modal__float-icon">
          <img src="images/logo.svg" alt="ThreeDots">
        </div>
        <div class="modal">
          <div class="modal__header">
            <h3 id="modalTitle">Add New Card</h3>
          </div>
          <div class="modal__body">
            <div class="modal-two-col">
              <div class="modal-field">
                <label>Column</label>
                <div class="col-combo" id="colCombo">
                  <button type="button" class="col-combo__trigger" id="colComboTrigger">
                    <span id="colComboLabel">Select column</span>
                    <i class="fas fa-chevron-down col-combo__chevron"></i>
                  </button>
                  <div class="col-combo__menu" id="colComboMenu">
                    <div id="colComboList"></div>
                    <div class="board-combo__footer">
                      <input type="text" class="board-combo__new-input" id="colNewInput" placeholder="New column…" autocomplete="off">
                      <button type="button" class="board-combo__new-add" id="colNewAdd" title="Add column"><i class="fas fa-plus"></i></button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-field">
                <label>Tag</label>
                <div id="cardTag"></div>
              </div>
            </div>
            <div class="modal-field">
              <label for="cardText">Description</label>
              <textarea id="cardText" placeholder="What needs to be done?"></textarea>
            </div>
            <button type="button" class="modal-more-toggle" id="modalMoreToggle">
              <i class="fas fa-chevron-down modal-more-toggle__icon"></i> More Options
            </button>
            <div class="modal-more-fields" id="modalMoreFields">
              <div class="modal-field">
                <label>To-Do</label>
                <div class="modal-todo-wrap" id="cardTodoWrap">
                  <div class="modal-todo-list" id="cardTodoList"></div>
                  <div class="modal-todo-input-row">
                    <input type="text" id="cardTodoInput" class="modal-todo-input" placeholder="Add a to-do item…">
                    <button type="button" id="cardTodoAdd" class="modal-todo-add-btn"><i class="fas fa-plus"></i></button>
                  </div>
                </div>
              </div>
              <div class="modal-field">
                <label>Assignee</label>
                <div class="col-combo" id="assigneeCombo">
                  <button type="button" class="col-combo__trigger" id="assigneeComboTrigger">
                    <span id="assigneeComboLabel" class="assignee-placeholder">Unassigned</span>
                    <i class="fas fa-chevron-down col-combo__chevron"></i>
                  </button>
                  <div class="col-combo__menu" id="assigneeComboMenu"></div>
                </div>
              </div>
              <div class="modal-field modal-field--row">
                <div class="modal-field modal-field--half">
                  <label for="cardDeadline">Deadline</label>
                  <input type="text" id="cardDeadline" placeholder="Select deadline…" readonly autocomplete="off">
                </div>
                <div class="modal-field modal-field--half">
                  <label for="cardLink">Link</label>
                  <input type="url" id="cardLink" placeholder="https://…">
                </div>
              </div>
            </div>
          </div>
          <div class="modal__actions">
            <button class="btn-cancel" id="modalCancel">Cancel</button>
            <button class="btn-add"    id="modalAdd"><i class="fas fa-plus"></i> Add Card</button>
          </div>
        </div><!-- /.modal -->
      </div><!-- /.modal-wrapper -->
    </div><!-- /.modal-overlay -->

  </div>

  <div class="login-overlay" id="loginOverlay">
    <div class="login-card">
      <div class="login-card__logo"><i class="fas fa-layer-group"></i></div>
      <h2>Welcome to ThreeDots</h2>
      <p>Sign in to access your boards</p>

      <!-- Social providers -->
      <button class="btn-google" id="btnGoogleSignIn">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
        Sign in with Google
      </button>
      <button class="btn-microsoft" id="btnMicrosoftSignIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="20" height="20"><rect x="1" y="1" width="9" height="9" fill="#f25022"/><rect x="11" y="1" width="9" height="9" fill="#7fba00"/><rect x="1" y="11" width="9" height="9" fill="#00a4ef"/><rect x="11" y="11" width="9" height="9" fill="#ffb900"/></svg>
        Sign in with Microsoft
      </button>

      <!-- Divider -->
      <div class="login-divider"><span>or continue with email</span></div>

      <!-- Sign-in form -->
      <div class="login-form" id="loginForm">
        <input type="email"    id="loginEmail"    class="login-input" placeholder="Email address" autocomplete="email">
        <input type="password" id="loginPassword" class="login-input" placeholder="Password" autocomplete="current-password">
        <button class="btn-email-action" id="btnEmailSignIn">Sign in</button>
        <p class="login-switch">No account? <button class="login-switch__btn" id="showRegister">Register</button></p>
      </div>

      <!-- Register form (hidden by default) -->
      <div class="login-form" id="registerForm" style="display:none">
        <input type="email"    id="regEmail"           class="login-input" placeholder="Email address" autocomplete="email">
        <input type="text"     id="regDisplayName"     class="login-input" placeholder="Display name">
        <input type="password" id="regPassword"        class="login-input" placeholder="Password (min 6 chars)" autocomplete="new-password">
        <input type="password" id="regPasswordConfirm" class="login-input" placeholder="Confirm password" autocomplete="new-password">
        <button class="btn-email-action" id="btnRegister">Create account</button>
        <p class="login-switch">Have an account? <button class="login-switch__btn" id="showLogin">Sign in</button></p>
      </div>

      <div class="login-error" id="loginError"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/cards.js"></script>
  <script src="js/board.js"></script>
  <script src="js/app.js"></script>
  <script src="js/tags.js"></script>
  <script src="https://unpkg.com/vanilla-calendar-pro@3.1.0/index.js"></script>
  <script src="js/modal.js"></script>
  <script src="js/confetti.js"></script>

</body>
</html>
