<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Management Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
  <script src="js/firebase-init.js"></script>
</head>
<body>

  <div class="app-shell" id="appShell">

    <div class="app-content">
      <div class="project-info">
        <!-- Left group -->
        <div class="topbar-left">
          <div class="topbar-logo">
            <div class="topbar-logo__icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="17" height="17">
                <rect x="1"    y="4" width="6.5" height="16" rx="1.5" fill="rgba(255,255,255,0.22)"/>
                <rect x="8.75" y="4" width="6.5" height="16" rx="1.5" fill="rgba(255,255,255,0.22)"/>
                <rect x="16.5" y="4" width="6.5" height="16" rx="1.5" fill="rgba(255,255,255,0.35)"/>
                <rect x="2.5"  y="6.5" width="3.5" height="2" rx="0.7" fill="white" opacity="0.95"/>
                <rect x="2.5"  y="10"  width="3.5" height="2" rx="0.7" fill="white" opacity="0.95"/>
                <rect x="10.2" y="6.5" width="3.5" height="2" rx="0.7" fill="white" opacity="0.95"/>
                <rect x="10.2" y="10"  width="3.5" height="2" rx="0.7" fill="white" opacity="0.6"/>
                <polyline points="18.2,12 19.8,14 22.5,9" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <span class="topbar-logo__text">ThreeDots</span>
          </div>
          <span class="topbar-breadcrumb__sep">/</span>
          <div class="board-title-wrap">
            <div class="board-combo" id="boardCombo">
              <button class="board-combo__trigger" id="boardComboTrigger">
                <i class="fas fa-columns board-combo__icon"></i>
                <span id="boardComboLabel">Select board</span>
                <i class="fas fa-chevron-down board-combo__chevron"></i>
              </button>
              <div class="board-combo__menu" id="boardComboMenu"></div>
            </div>
            <button class="board-add-btn" id="navAddBoard" title="New board"><i class="fas fa-plus"></i></button>
          </div>
          <div class="board-options-wrap">
            <button class="project-column-heading__options" id="boardOptionsBtn" title="Board options"><i class="fas fa-ellipsis-h"></i></button>
            <div class="board-dropdown" id="boardDropdown">
              <button id="boardOptRename"><i class="fas fa-pen"></i> Rename board</button>
              <button id="boardOptDelete" class="danger"><i class="fas fa-trash-alt"></i> Delete board</button>
            </div>
          </div>
        </div>

        <!-- Right group -->
        <div class="topbar-right">
          <div class="topbar-search" id="topbarSearch">
            <button class="topbar-search__icon-btn" id="searchToggle" title="Search"><i class="fas fa-search"></i></button>
            <input type="text" id="boardSearch" placeholder="Search cards&hellip;" autocomplete="off">
            <button class="topbar-search__clear" id="searchClear" title="Clear"><i class="fas fa-times"></i></button>
          </div>

          <div class="topbar-divider"></div>

          <div class="project-participants" id="projectParticipants">
            <!-- avatars injected by renderParticipants() -->
            <button class="project-participants__add" id="addParticipantBtn" title="Add participant"></button>
            <div class="participant-popover" id="participantPopover">
              <input type="email" id="participantEmail" placeholder="User's email address" autocomplete="off">
              <div class="participant-popover__actions">
                <button id="participantAddConfirm">Add</button>
                <button id="participantAddCancel">Cancel</button>
              </div>
              <p class="participant-popover__msg" id="participantMsg"></p>
            </div>
          </div>
   <div class="topbar-divider"></div>
          <button class="topbar-icon-btn" id="archiveBtn" title="Archive"><i class="fas fa-archive"></i></button>
          <button class="topbar-icon-btn" id="activityToggle" title="Activity"><i class="fas fa-stream"></i></button>

          <div class="topbar-divider"></div>

          <!-- User dropdown -->
          <div class="topbar-user" id="topbarUser">
            <div class="topbar-user__trigger" id="topbarUserTrigger">
              <div class="topbar-avatar-wrap">
                <div class="nav-user__avatar" id="navAvatar"><i class="fas fa-user"></i></div>
                <span class="topbar-status-dot"></span>
              </div>
            </div>
            <div class="topbar-user__dropdown" id="topbarUserDropdown">
              <div class="topbar-user__header">
                <div class="topbar-user__hd-avatar">
                  <div class="nav-user__avatar nav-user__avatar--lg" id="navAvatarDrop"><i class="fas fa-user"></i></div>
                  <span class="topbar-status-dot"></span>
                </div>
                <div class="topbar-user__hd-info">
                  <div class="topbar-user__hd-name" id="navUserName">Guest</div>
                  <div class="topbar-user__hd-email" id="navUserEmail"></div>
                </div>
              </div>
              <div class="topbar-user__divider"></div>
              <button class="topbar-user__item" id="profileBtn"><i class="fas fa-user-circle"></i> My Profile</button>
              <button class="topbar-user__item" id="settingsBtn"><i class="fas fa-cog"></i> Settings</button>
              <div class="topbar-user__divider"></div>
              <button class="topbar-user__item danger" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
            </div>
          </div>
        </div>
      </div>

      <div class="app">
        <main class="project">
          <div class="project-tasks"></div>
        </main>
        <aside class="task-details collapsed" id="activityPanel">
          <div class="task-activity">
            <h2>Recent Activity</h2>
            <ul id="activityFeed"></ul>
          </div>
        </aside>
      </div>
    </div>

    <div class="save-toast" id="saveToast"></div>

    <button class="fab" id="fabBtn" title="Add card"><i class="fas fa-plus"></i></button>

    <div class="modal-overlay" id="modalOverlay">
      <div class="modal">
        <h3>Add New Card</h3>
        <label for="cardColumn">Column</label>
        <select id="cardColumn"></select>
        <label for="cardTag">Tag</label>
        <select id="cardTag">
          <option value="urgent">Urgent</option>
          <option value="review">Review</option>
          <option value="research">Research</option>
          <option value="docs">Docs</option>
          <option value="qa">QA</option>
          <option value="backend">Backend</option>
          <option value="design">UI Design</option>
          <option value="feature">Feature</option>
          <option value="illustration">Illustration</option>
          <option value="copyright">Copywriting</option>
        </select>
        <label for="cardText">Task description</label>
        <textarea id="cardText" placeholder="What needs to be done?"></textarea>
        <div class="modal__actions">
          <button class="btn-cancel" id="modalCancel">Cancel</button>
          <button class="btn-add"    id="modalAdd">Add Card</button>
        </div>
      </div>
    </div>

  </div>

  <div class="login-overlay" id="loginOverlay">
    <div class="login-card">
      <div class="login-card__logo"><i class="fas fa-layer-group"></i></div>
      <h2>Welcome to ThreeDots</h2>
      <p>Sign in to access your boards</p>

      <!-- Social providers -->
      <button class="btn-google" id="btnGoogleSignIn">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
        Sign in with Google
      </button>
      <button class="btn-microsoft" id="btnMicrosoftSignIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="20" height="20"><rect x="1" y="1" width="9" height="9" fill="#f25022"/><rect x="11" y="1" width="9" height="9" fill="#7fba00"/><rect x="1" y="11" width="9" height="9" fill="#00a4ef"/><rect x="11" y="11" width="9" height="9" fill="#ffb900"/></svg>
        Sign in with Microsoft
      </button>

      <!-- Divider -->
      <div class="login-divider"><span>or continue with email</span></div>

      <!-- Sign-in form -->
      <div class="login-form" id="loginForm">
        <input type="email"    id="loginEmail"    class="login-input" placeholder="Email address" autocomplete="email">
        <input type="password" id="loginPassword" class="login-input" placeholder="Password" autocomplete="current-password">
        <button class="btn-email-action" id="btnEmailSignIn">Sign in</button>
        <p class="login-switch">No account? <button class="login-switch__btn" id="showRegister">Register</button></p>
      </div>

      <!-- Register form (hidden by default) -->
      <div class="login-form" id="registerForm" style="display:none">
        <input type="email"    id="regEmail"           class="login-input" placeholder="Email address" autocomplete="email">
        <input type="text"     id="regDisplayName"     class="login-input" placeholder="Display name">
        <input type="password" id="regPassword"        class="login-input" placeholder="Password (min 6 chars)" autocomplete="new-password">
        <input type="password" id="regPasswordConfirm" class="login-input" placeholder="Confirm password" autocomplete="new-password">
        <button class="btn-email-action" id="btnRegister">Create account</button>
        <p class="login-switch">Have an account? <button class="login-switch__btn" id="showLogin">Sign in</button></p>
      </div>

      <div class="login-error" id="loginError"></div>
    </div>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/cards.js"></script>
  <script src="js/board.js"></script>
  <script src="js/app.js"></script>
  <script src="js/modal.js"></script>

</body>
</html>
